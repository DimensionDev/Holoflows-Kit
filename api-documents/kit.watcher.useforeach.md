<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@holoflows/kit](./kit.md) &gt; [Watcher](./kit.watcher.md) &gt; [useForeach](./kit.watcher.useforeach.md)

## Watcher.useForeach() method

Just like React hooks. Provide callbacks for each node changes.

<b>Signature:</b>

```typescript
useForeach(forEach: (element: T, key: unknown, metadata: T extends Node ? DOMProxy<T, Before, After> : unknown) => useForeachReturns<T>): this;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  forEach | <code>(element: T, key: unknown, metadata: T extends Node ? DOMProxy&lt;T, Before, After&gt; : unknown) =&gt; useForeachReturns&lt;T&gt;</code> |  |

<b>Returns:</b>

`this`

## Remarks

Return value of `fn`

- `void`<!-- -->: No-op

- `((oldNode: T) => void)`<!-- -->: it will be called when the node is removed.

- `{ onRemove?: (old: T) => void; onTargetChanged?: (newNode: T, oldNode: T) => void; onNodeMutation?: (node: T) => void }`<!-- -->,

- - `onRemove` will be called when node is removed.

- - `onTargetChanged` will be called when the node is still existing but target has changed.

- - `onNodeMutation` will be called when the node is the same, but it inner content or attributes are modified.

## Example


```
// ? if your LiveSelector return Element
watcher.useForeach((node, key, meta) => {
    console.log(node.innerHTML) // when a new key is found
    return {
        onRemove() { console.log('The node is gone!') },
        onTargetChanged() {
            console.log('Key is the same, but the node has changed!')
            console.log(node.innerHTML) // `node` is still the latest node!
            // appendChild, addEventListener will not lost too!
        },
        onNodeMutation() {
            console.log('Key and node are both the same, but node has been mutated.')
        }
    }
})

// ? if your LiveSelector does not return Element but something else
watcher.useForeach((value, key) => {
    console.log(value) // your value here.
    return {
        onRemove() { console.log('The value is gone!') },
        onTargetChanged(value) {
            console.log('Key is the same, but the value has changed!')
            console.log(value) // New value
        }
    }
})


```

